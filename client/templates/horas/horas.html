
<template name="horas">
	<div class="box-header">
		{{> nuevoHoras}}
	</div>
  <div style="width: 100%; background-color: #F9F9F9;">
        <div style="margin: 0 auto;">
          {{> menuHoras}}
        </div>
  </div>
  <div class="box-semi-header">
    <br>
    <h1>Lista de Horas</h1>

  </div>
	<div class="box">
    <div class="box-news" style="margin-top: 20px; padding-left: 0; padding-right: 0;">
      <a class="btn nueva-tarea horas nuevo-evento verde-flat" id="generate-pdf" style="margin-left: 15px; margin-bottom: 15px;">Generar factura</a>
      {{> listaHoras}}
    </div>
	</div>

</template>

<template name="menuBotonesFacturacion">
	<div class="btn-group">
		<button type="button" class="btn dropdown-toggle nueva-tarea azul-flat" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="margin-left: 10px; width: 90px; border-bottom: none; margin-top: 15px;">
			Nuevo <span class="caret"></span>
		</button>
		<ul class="dropdown-menu">
			<li class="persona agregar-hora"><a href="#">Hora</a></li>
			<li class="empresa agregar-gasto"><a href="#">Gasto Administrativo</a></li>
			<li class="empresa agregar-gasto-administrativo"><a href="#">Gasto</a></li>
			<li class="empresa agregar-tarifa"><a href="#">Tarifa</a></li>
			<li class="empresa agregar-tipo-cambio"><a href="#">Tipo de cambio</a></li>
		</ul>
	</div>
</template>

<template name="facturacion">
	<!-- Menu -->
    <div class="franja-progreso">
        <div class="progreso">
            <p>
                {{email}}
                <i class="glyphicon glyphicon-chevron-right" style="color: #2c3e50"> </i>
                <a href="/facturacion" > Facturación</a>
                <i class="glyphicon glyphicon-chevron-right" style="color: #2c3e50"> </i>
                <a href="/facturacion/horas" > Horas</a>
            </p>
        </div>
    </div>

    <div class="franja-filtros" style="padding-left: 4px;">
        <a href="/dashboard2" class="menu-asunto-aim" style="margin-left: 0px;">
            Actividad
        </a>
        <a href="/calendario2" class="menu-asunto-aim " style="margin-left: 0px;">
            Calendario
        </a>
        <a href="/tareas" class="menu-asunto-aim " style="margin-left: 0px;">
            Tareas
        </a>
        <a href="/equipo" class="menu-asunto-aim ">
            Equipo
        </a>
        <a href="/asuntos2" class="menu-asunto-aim" style="margin-left: 0px;">
            Asuntos
        </a>
        <a href="/clientes2" class="menu-asunto-aim " style="margin-left: 0px;">
            CRM
        </a>
        <a href="/facturacion" class="menu-asunto-aim asunto-item-activo" style="margin-left: 0px;">
            Facturación
        </a>
    </div>

    <div class="franja-filtros" style="margin-bottom: 0px;">
         <a href="/facturacion" class="menu-asunto-aim ">
            Resúmen
        </a>
        <a href="/facturacion/horas" class="menu-asunto-aim asunto-item-activo" style="margin-left: 0px;">
            Horas
        </a>
        <a href="/facturacion/gastos" class="menu-asunto-aim" style="margin-left: 10px;">
            Gastos
        </a>
        <a href="/facturacion/cobros" class="menu-asunto-aim" style="margin-left: 10px;">
            Cobros
        </a>
        <a href="/facturacion/reportes" class="menu-asunto-aim" style="margin-left: 10px;">
            Reportes
        </a>
        <a href="/facturacion/configuracion-facturacion" class="menu-asunto-aim" style="margin-left: 10px;">
            Configuración
        </a>
    </div>
	<div>


		<div class="franja-filtros" >
			{{> menuBotonesFacturacion}}
            <select class="tipo-cambio select-bunqr" style="width: 10%; margin-top: 10px; margin-bottom: 0; height: 35px;" name="">
                <option value="soles">Soles</option>
                <option value="dolares">Dólares</option>
            </select>
            <div class="btn-group" >
          		<button type="button" class="btn dropdown-toggle  nueva-tarea azul-flat"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="margin-left: 22px; width: 90px; border-bottom: none; margin-top: 15px; background-color: white; color: #34495e;">
   					<i class="fa fa-filter" aria-hidden="true"></i> <span class="caret"></span>
          		</button>
          		<ul class="dropdown-menu">
                    <li class="empresa todos"><a href="#" style="color: #9b59b6;">Todos</a></li>
                    <li class="empresa hoy"><a href="#" style="color: #9b59b6;">Hoy</a></li>
                    <li class="empresa ayer"><a href="#" style="color: #2ecc71;">Ayer</a></li>
                    <li class="empresa semana"><a href="#" style="color: #e74c3c;">Esta semana</a></li>
                    <li class="empresa mes"><a href="#" style="color: #e74c3c;">Este mes</a></li>
                    <li class="divider"></li>
                    <li class="empresa asuntos"><a href="#">Por asunto</a></li>
                    <li class="empresa cliente"><a href="#">Por cliente</a></li>
                    {{#if esAdministradoroEncargado}}
                        <li class="empresa miembros"><a href="#">Por miembros</a> </li>
                    {{/if}}
          		</ul>
            </div>
            <input type="text" class="buscador-bunqr buscador-horas" style="width:50%" placeholder="Busca horas por descripción, clientes o asunto...">

        </div>

        <!-- Lista de horas -->
        <div class="cuadro-tarea-horas"  style="padding: 0px; height: 400px;">
            <div class="table-wrapper">
                <table cellspacing="0" id="tech-companies">
                     <thead>
                            <tr>
                                 <th class="persist essential">
                                    <h3 style="text-align: center;" >
                                        <i class="fa fa-folder" aria-hidden="true"></i>
                                    </h3>
                                 </th>
                                 <th class="optional">
                                    <h3 style="text-align: center;">
                                        <i class="fa fa-clock-o" aria-hidden="true"></i>
                                    </h3>
                                 </th>
                                 <th class="essential">
                                    <h3 style="text-align: center;">
                                        <i class="fa fa-briefcase" aria-hidden="true"></i>
                                    </h3>
                                 </th>
                                <th class="essential">
                                    <h3 style="text-align: center;">
                                        <i class="fa fa-user" aria-hidden="true"></i>
                                    </h3>
                                 </th>
                                 {{#if esAdministradoroEncargado}}
                                 <th class="optional">
                                     <h3 style="text-align: center;">
                                         <i class="fa fa-money" aria-hidden="true"></i>
                                     </h3>
                                 </th>
                                 {{/if}}
                                 <th>
                                    <h3 style="text-align: center;">
                                        <i class="fa fa-cog" aria-hidden="true"></i>
                                    </h3>
                                 </th>
                            </tr>
                     </thead>
                     <tbody>
                        {{#each horas}}
                            <tr>
                                 <th>
                                     {{#if this.descripcion}}
                                         <h5 style="text-align: center; font-size: 17.5px; color: #34495e; font-weight: bold;">
                                             {{this.descripcion}}
                                         </h5>
                                     {{else}}
                                        <h5 style="color: #7f8c8d;"> <a class="agregar-descripcion" href="#">+ Descripcion</a> </h5>
                                     {{/if}}
                                 </th>
                                 <td>
                                    <h5 style="text-align: center; font-size: 17.5px; color: #34495e; font-weight: bold;">
                                        {{this.horas}}h {{this.minutos}}m
                                    </h5>
                                 </td>
                                <td>
                                    {{#if this.asunto.nombre}}
                                        <h5 style="text-align: center; font-size: 14px; color: #34495e;">
                                            {{this.asunto.nombre}}
                                        </h5>
                                    {{else}}
                                        <h5 style="color: #7f8c8d;"><a class="agregar-asunto" href="#">+ Asunto</a></h5>
                                    {{/if}}
                                 </td>
                                 <td>
                                     {{#if this.asunto}}
                                         <h5 style="text-align: center; font-size: 14px; color: #34495e;">
                                             {{cliente}}
                                         </h5>
                                     {{else}}
                                         <h5 style="color: #7f8c8d;"><a class="agregar-asunto" href="#"></a></h5>
                                     {{/if}}
                                </td>
                                {{#if esAdministradoroEncargado}}
                                <td>
									{{#if this.precio}}
                                    <h5 style="text-align: center; font-size: 14px; color: #34495e;">
                                        {{precio}}
                                    </h5>
									{{/if}}
                                </td>
                                {{/if}}
                                 <td>
                                    <h3 style="text-align: center;">
                                        <div class="btn-group">
                                          <button type="button" class="btn dropdown-toggle" style="background-color: white; padding: 0; color: #34495e;" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="glyphicon glyphicon-option-vertical"></i> <span class="caret"></span>
                                          </button>
                                          <ul class="dropdown-menu">
                                            <li class="editar-hora"  ><a data-id="{{this._id}}" style="color: #3498db;">Editar</a></li>
                                            <li role="separator" class="divider"></li>
                                            <li class="eliminar-hora"><a data-id="{{this._id}}" style="color: #e74c3c;">Eliminar</a></li>
                                          </ul>
                                        </div>
                                    </h3>
                                 </td>
                            </tr>
                        {{/each}}
                     </tbody>
                </table>
            </div>
        </div>

	</div>

</template>

<template name="listaHoras">
 		  {{#if Template.subscriptionsReady}}
      {{#if hayhoras}}
  		<table class="table table-striped">
    		<thead>
      			<tr>
        			<th>FECHA</th>
       	 			<th>RESPONSABLE</th>
        			<th>ASUNTO</th>
        			<th>DETALLE</th>
        			<th>MONTO</th>
      			</tr>
    		</thead>
    		<tbody>
    		{{#transition in="slideInLeft" out="bounceOut"}}
    		{{#each horas}}
      			<tr>
        			<td>{{fecha}}</td>
        			<td>{{responsable.nombre}}</td>
        			<td>{{asunto.nombre}}</td>
        			<td>{{descripcion}}</td>
        			<td>{{total}}</td>
      			</tr>
      		{{/each}}
      		{{/transition}}
    		</tbody>
  		</table>
      {{else}}
        <h1 style="margin-left: 15px;">No hay horas ingresadas.</h1>
      {{/if}}
	   {{else}}
      {{> loader}}
     {{/if}}

</template>

<template name="listaHorasxAsunto">
      <div style="width: 100%; display: block; padding: 10px; margin-bottom: 10px;">
        <a class="btn nueva-tarea horas nuevo-evento verde-flat">+ Horas</a>
      </div>
      {{#if Template.subscriptionsReady}}
      {{#if hayhoras}}
      <table class="table table-striped">
        <thead>
            <tr>
              <th>FECHA</th>
              <th>RESPONSABLE</th>

              <th>DETALLE</th>
              <th>MONTO</th>
            </tr>
        </thead>
        <tbody>
        {{#transition in="slideInLeft" out="bounceOut"}}
        {{#each horas}}
            <tr>
              <td>{{fecha}}</td>
              <td>{{responsable.nombre}}</td>

              <td>{{descripcion}}</td>
              <td>{{total}}</td>
            </tr>
          {{/each}}
          {{/transition}}
        </tbody>
      </table>
      {{else}}
        <h1 style="margin-left: 15px;">No hay horas ingresadas.</h1>
      {{/if}}
     {{else}}
      <h1>Cargando...</h1>
     {{/if}}

</template>

<template name="listaGastos">
  		<table class="table table-striped">
    		<thead>
      			<tr>
        			<th>FECHA</th>
       	 			<th>RESPONSABLE</th>
        			<th>ASUNTO</th>
        			<th>DETALLE</th>
        			<th>MONTO</th>
      			</tr>
    		</thead>
    		<tbody>
    		{{#transition in="slideInLeft" out="bounceOut"}}
      			{{#each gastos}}
      			<tr>
        			<td>{{fecha}}</td>
        			<td>{{responsable.nombre}}</td>
        			<td>{{asunto.nombre}}</td>
        			<td>{{descripcion}}</td>
        			<td>{{monto}}</td>
      			</tr>
      		{{/each}}
      		{{/transition}}
    		</tbody>
  		</table>
</template>

<template name="listaGastosxAsunto">
      <div style="width: 100%; display: block; padding: 10px; margin-bottom: 10px;">
        <a class="btn nueva-tarea horas nuevo-evento verde-flat">+ Gasto</a>
      </div>
      {{#if Template.subscriptionsReady}}
      {{#if haygastos}}
      <table class="table table-striped">
        <thead>
            <tr>
              <th>FECHA</th>
              <th>RESPONSABLE</th>
              <th>DETALLE</th>
              <th>MONTO</th>
            </tr>
        </thead>
        <tbody>
        {{#transition in="slideInLeft" out="bounceOut"}}
        {{#each gastos}}
            <tr>
              <td>{{fecha}}</td>
              <td>{{responsable.nombre}}</td>
              <td>{{descripcion}}</td>
              <td>{{monto}}</td>
            </tr>
          {{/each}}
          {{/transition}}
        </tbody>
      </table>
      {{else}}
        <h1 style="margin-left: 15px;">No hay gastos ingresados.</h1>
      {{/if}}
     {{else}}
      <h1>Cargando...</h1>
     {{/if}}
</template>

<template name="nuevoHoras">
	<a class="btn nueva-tarea horas nuevo-evento verde-flat">+ Horas</a>
	<a class="btn nueva-tarea gastos nuevo-evento verde-flat">+ Gastos</a>
</template>

<template name="agregarDescripcionHorasModal">
	<div id="agregar-horas-modal" class="modal fade">
	   <div class="modal-dialog">
		   <div class="modal-content">

			   <div class="modal-header">
				   <h4 class="modal-title">Agregar Descripcion</h4>
			   </div>

			   <div class="modal-body">
				 <form class="cd-form floating-labels" style="margin-top: -20px; margin-bottom: 0px;" novalidate>
				   <fieldset>
					   <div class="icon">
						   <label class="cd-label" for="cd-company">Descripción</label>
						   <input class="company" type="text" name="descripcion" id="cd-company">
					   </div>
				   </fieldset>
				 </form>
			   </div>

			   <div class="modal-footer">
				   <button type="button" class="btn btn-primary agregar-descripcion">Añadir</button>
				   <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
			   </div>

		   </div>
	   </div>
   </div>

</template>

<template name="agregarAsuntoHorasModal">
	<div id="agregar-horas-modal" class="modal fade">
	   <div class="modal-dialog">
		   <div class="modal-content">

			   <div class="modal-header">
				   <h4 class="modal-title">Agregar Asunto</h4>
			   </div>

			   <div class="modal-body">
				 <form class="cd-form floating-labels" style="margin-top: -20px; margin-bottom: 0px;" novalidate>
				   <fieldset>
					   <div class="icon">
						   <label class="cd-label" for="cd-email">Asunto</label>
						   <p class="cd-select icon">
							   <select class="budget asunto">
								   {{#each asunto}}
								   <option value="{{_id}}">{{caratula}}</option>
								   {{/each}}
							   </select>
						   </p>
					   </div>
				   </fieldset>
				 </form>
			   </div>

			   <div class="modal-footer">
				   <button type="button" class="btn btn-primary agregar-asunto">Agregar</button>
				   <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
			   </div>

		   </div>
	   </div>
   </div>

</template>


<template name="agregarHoras">
	 <div id="agregar-horas-modal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Agregar Hora</h4>
                </div>

                <div class="modal-body">
                  <form class="cd-form floating-labels" style="margin-top: -20px; margin-bottom: 0px;" novalidate>
                    <fieldset>
						<div class="fh-checkbox">
							<input class="es-tarea " style="opacity:100" id="tarea-select"  type="checkbox"  name="" >
							<label class="cd-label" for="tarea-select">Es una tarea?</label>
						</div>
						<div class="icon hide buscar-tarea">
							<input class="company form-control typeahead" id="tarea-typeahead" name="tareas" type="text"
						       placeholder="Tareas"
						       autocomplete="on" spellcheck="off"
						       data-source="tareasHoras"/>
						</div>
                      	<div class="icon descripcion-tarea">
                        	<label class="cd-label" for="cd-company">Descripción</label>
                        	<input class="company" type="text" name="descripcion" id="cd-company">
                      	</div>

						<div class="icon">
		    				<label class="cd-label" for="cd-company">Fecha</label>
							<input class="company" type="text" name="fecha" id="datepicker" readonly>
		    			</div>

						<div class="icon">
							<label class="cd-label" for="cd-email">Asunto</label>
							<p class="cd-select icon">
								<select class="budget asunto" name="asunto">
									{{#each asunto}}
									<option value="{{_id}}">{{caratula}}</option>
									{{/each}}
								</select>
							</p>
						</div>

												<div class="icon">
                        	<label class="cd-label" for="cd-company">Tiempo horas</label>
                        	<input class="company" type="number" step="1" min="1" name="horas" id="cd-company">
                      	</div>
                        <div class="icon">
                            <label class="cd-label" for="cd-company">Tiempo minutos</label>
                            <input class="company" type="number" step="1" min="1" name="minutos" id="cd-company">
                        </div>
												<div class="fh-checkbox">
												<input class="cobrado" style="opacity:100"  type="checkbox" name="" >
												<label class="cd-label"  for="tarea-select">No es cobrable</label>
												</div>

                      	<input type="submit" value="Agregar horas">
                    </fieldset>
                  </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                </div>

            </div>
        </div>
    </div>
</template>

<template name="agregarHoras2">
	<div class="modal fade" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">

						<div class="modal-body" style="padding: 0px; background-color: #F2F2F2;">

							<div class="modal-formulario">
						<div class="side-help">
							<div class="about-asunto fondo-bunqr" style="height: 230px;">
								<h2>
									Trabajos
								</h2>
								<p style="color: white;">
									Agrega horas de trabajo y enlazalo con los asuntos de tu cliente. Lleva reportes de cliente, asunto y compara tu rentabilidad.
								</p>

							</div>
							<div class="about-asunto fondo-ayuda" style="height: 245px; padding-top: 55px;">
								<h3>
									¿Necesitas ayuda?
								</h3>
								<p>
									Haz click <a href="#" data-elevio-article="75102" class="color-bunqr">aquí</a> para ver un tutorial. También, puedes contactarnos a <a href="#" class="color-bunqr">soporte@grupoddv.com</a>
								</p>
							</div>
						</div>
						<div class="contenido-formulario">
							<div class="cuadro-datos-asunto">
								<h1 class="color-bunqr">Agregar trabajo</h1>
								<hr>
								<div class="formulario-bunqr">
									<div class="medio-ancho">
										<div class="fh-checkbox">
											<input class="es-tarea " style="opacity:100" id="tarea-select"  type="checkbox"  name="" >
											<label class="cd-label" for="tarea-select">¿Es una tarea?</label>
										</div>
									</div>
									<div class="medio-ancho hide buscar-tarea">
											<input class="typeahead" id="tarea-typeahead" name="tareas" type="text"
													 placeholder="Tareas"
													 autocomplete="on" spellcheck="off"
													 data-source="tareasHoras"
													 style="width: 40%; height: 42.5px border: 2px solid red;"/>
									</div>

									<div class="medio-ancho descripcion-tarea">
										<label for="asunto">Descripción*</label>
										<input type="text" name="descripcion">
									</div>
									<div class="medio-ancho">
										<label for="fecha">Fecha</label>
											<input class="company" type="text" name="fecha" id="datepicker" readonly value="Hoy">
									</div>
									<div class="medio-ancho">
										<label for="asunto">Asunto*</label>
										<select class="budget asunto" name="asunto">
											{{#each asunto}}
											<option value="{{_id}}">{{caratula}} - {{cliente.nombre}}</option>
											{{/each}}
										</select>
									</div>
									<div class="medio-ancho">
										<label class="cd-label" for="cd-company">Tiempo horas</label>
										<input  type="number" step="1" min="1" name="horas">
									</div>
									<div class="medio-ancho">
											<label class="cd-label" for="cd-company">Tiempo minutos</label>
											<input type="number" step="1" min="1" name="minutos">
									</div>
									<div class="medio-ancho">
										<div class="fh-checkbox">
											<input class="cobrado" style="opacity:100"  type="checkbox" name="" >
											<label class="cd-label">No es cobrable</label>
										</div>
									</div>
									</div>
								</div>
							</div>
							<div class="cuadro-datos-asunto" style="height: 100px; width: 76.5%; position: relative; left: 208px; background-color: white; height: 75px; border-top: 2px solid #F2F2F2;">
								<input class="agregar-trabajo" type="button" value="Agregar trabajo">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

</template>

<template name="horaModal">
  <div class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <div class="modal-body" style="padding: 0px; background-color: #F2F2F2;">

              <div class="modal-formulario">
            <div class="side-help">
              <div class="about-asunto fondo-bunqr" style="height: 230px;">
                <h2>
                  Trabajos
                </h2>
                <p style="color: white;">Agrega horas de trabajo y enlazalo con los asuntos de tu cliente. Lleva reportes de cliente, asunto y compara tu rentabilidad</p>

              </div>
              <div class="about-asunto fondo-ayuda" style="height: 245px; padding-top: 55px;">
                <h3>
                  ¿Necesitas ayuda?
                </h3>
                <p>
                  Haz click <a href="#" data-elevio-article="75102" class="color-bunqr">aquí</a> para ver un tutorial. También, puedes contactarnos a <a href="#" class="color-bunqr">soporte@grupoddv.com</a>
                </p>
              </div>
            </div>

            <div class="contenido-formulario" style="height: 480px;">

            </div>

            <div class="cuadro-datos-asunto" style="height: 100px; width: 76.5%; position: relative; left: 208px; background-color: white; height: 75px; border-top: 2px solid #F2F2F2;">
              <input class="agregar-hora" type="button" value="Agregar hora">
            </div>
          </div>
            </div>
        </div>
      </div>
  </div>
</template>
